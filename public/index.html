<!DOCTYPE html>
<html>
<head>
    <title>BIP39 High Speed Test</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #000; color: #0f0; padding: 40px; }
        .stats { font-size: 20px; margin-bottom: 20px; color: #fff; }
        #log { height: 400px; overflow-y: auto; background: #111; padding: 10px; border: 1px solid #333; }
        button { background: #0f0; color: #000; border: none; padding: 15px 30px; font-weight: bold; cursor: pointer; }
        button:hover { background: #fff; }
    </style>
</head>
<body>
    <div class="stats">
        Status: <span id="status">Idle</span> | 
        Total: <span id="total">0</span> | 
        Success: <span id="success">0</span>
    </div>
    <button id="btn" onclick="startStressTest()">START 1000 REQUESTS</button>
    <div id="log"></div>

    <script>
        let total = 0;
        let success = 0;

        async function startStressTest() {
            document.getElementById('status').innerText = "Running...";
            const log = document.getElementById('log');
            
            // Launch 1000 requests in parallel
            const requests = Array.from({ length: 1000 }).map(async () => {
                try {
                    const res = await fetch('/api/generate');
                    const data = await res.json();
                    if(data.success) {
                        success++;
                        total++;
                        const entry = document.createElement('div');
                        entry.innerText = `> ${data.phrase}`;
                        log.prepend(entry);
                    }
                } catch (e) {
                    total++;
                }
                document.getElementById('total').innerText = total;
                document.getElementById('success').innerText = success;
            });

            await Promise.all(requests);
            document.getElementById('status').innerText = "Completed";
        }
    </script>
</body>
</html>
